<!-- Newsletter Form + EmailJS -->
<form id="newsletterForm" class="max-w-2xl mx-auto flex flex-col sm:flex-row gap-6 shadow-2xl rounded-3xl overflow-hidden bg-white p-4">
  <input
    type="email"
    id="newsletterEmail"
    name="email"
    placeholder="Tu email... (prometo no contarlo)"
    required
    aria-label="DirecciÃ³n de email para suscribirse"
    class="flex-1 px-8 py-5 text-lg text-gray-800 rounded-2xl focus:outline-none focus:ring-4 focus:ring-pink-400 transition-shadow shadow-inner"
  />
  <button
    type="submit"
    id="submitNewsletter"
    class="bg-pink-600 text-white font-black px-10 py-5 rounded-2xl hover:bg-pink-700 transition transform hover:scale-105 shadow-xl"
  >
    Quiero pecar â†’
  </button>
</form>

<!-- Mensaje de Ã©xito -->
<div id="newsletterSuccess" class="hidden text-center mt-10 animate-fade-in">
  <div class="text-7xl mb-6">ğŸ‰ğŸ°</div>
  <h3 class="text-4xl font-black text-pink-600 mb-4">Â¡Ya eres parte de la conspiraciÃ³n!</h3>
  <p class="text-xl text-gray-700 max-w-xl mx-auto">
    Te hemos enviado un <strong>cÃ³digo de descuento del 10%</strong> a tu correo.<br>
    <strong>CÃ³digo: PECADO10</strong> â€“ Ãšsalo en tu prÃ³ximo pecado dulce.
  </p>
  <p class="text-lg text-gray-600 mt-4">Revisa tu bandeja (y spam ğŸ˜ˆ)</p>
</div>

<!-- Mensaje de error -->
<div id="newsletterError" class="hidden text-center mt-10 text-red-600">
  <p class="text-xl">Algo saliÃ³ mal... ğŸ˜”</p>
  <p>Por favor, intÃ©ntalo de nuevo o escrÃ­benos a info@malditadulzura.com</p>
</div>

<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
  // Inicializa EmailJS con tu User ID (Public Key)
  emailjs.init("TU_USER_ID_AQUÃ");  // â† REEMPLAZA CON TU USER ID REAL

  document.getElementById('newsletterForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const email = document.getElementById('newsletterEmail').value.trim();
    const submitButton = document.getElementById('submitNewsletter');
    const successDiv = document.getElementById('newsletterSuccess');
    const errorDiv = document.getElementById('newsletterError');

    if (!email) return;

    submitButton.disabled = true;
    submitButton.textContent = "Enviando pecado...";

    // Datos que se envÃ­an a la plantilla de EmailJS
    const templateParams = {
      to_email: email,               // â† Destinatario
      nombre: "Pecador/a dulce",     // Puedes pedir nombre si quieres
      discount_code: "PECADO10",
      reply_to: "info@malditadulzura.com"  // Para que puedan responderte
    };

    // EnvÃ­a el correo usando EmailJS
    emailjs.send(
      'TU_SERVICE_ID_AQUÃ',          // â† Reemplaza con tu Service ID
      'TU_TEMPLATE_BIENVENIDA_ID_AQUÃ',  // â† Reemplaza con el ID de tu plantilla de bienvenida
      templateParams
    )
    .then(() => {
      // Ã‰xito: muestra mensaje bonito
      document.getElementById('newsletterForm').classList.add('hidden');
      successDiv.classList.remove('hidden');
      successDiv.classList.add('animate-fade-in');
      errorDiv.classList.add('hidden');
    })
    .catch((err) => {
      console.error('Error al enviar:', err);
      errorDiv.classList.remove('hidden');
      successDiv.classList.add('hidden');
    })
    .finally(() => {
      submitButton.disabled = false;
      submitButton.textContent = "Quiero pecar â†’";
    });
  });
</script>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
  }
</style>
